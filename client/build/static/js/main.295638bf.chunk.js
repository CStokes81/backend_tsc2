(this.webpackJsonptsc2=this.webpackJsonptsc2||[]).push([[0],{29:function(t,n,e){},30:function(t,n,e){},47:function(t,n,e){"use strict";e.r(n);var r,i,o=e(0),c=e.n(o),a=e(19),l=e.n(a),u=(e(29),e(30),e(4)),s=e(2),f=e(3),p=e(1),d=f.a.div(r||(r=Object(s.a)(["\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground-color: #0A08A2;\n"]))),b=f.a.button(i||(i=Object(s.a)(['\n\tfont-size: 2.2em;\n\tfont-family: \'Orbitron\', sans-serif;\n\t/* border: 2px solid #222; */\n\tborder: none;\n\tpadding: 30px 100px;\n\tbackground-color: #fff;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tvertical-align: middle;\n\ttext-decoration: none;\n\ttransition: all 0.5s;\n\tcolor: #95190c;\n\tborder-right: 1px solid #eee;\n\tborder-radius: 2px;\n\tborder-bottom: 1px solid #ccc;\n\t:focus {\n\t\toutline: 0;\n\t}\n\t:hover {\n\t\tmargin-left: 5px;\n\t\tmargin-top: 5px;\n\t\t::after {\n\t\t\tright: -5px;\n\t\t\ttop: 2px;\n\t\t\twidth: 5px;\n\t\t}\n\t\t::before {\n\t\t\tright: -3px;\n\t\t\theight: 5px;\n\t\t}\n\t}\n\t::after {\n\t\tcontent: "";\n\t\theight: 100%;\n\t\twidth: 10px;\n\t\tbackground-color: #eee;\n\t\tright: -10px;\n\t\ttop: 5px;\n\t\ttransform: skewY(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n\t::before {\n\t\tcontent: "";\n\t\theight: 10px;\n\t\twidth: 100%;\n\t\tbackground-color: #ccc;\n\t\tright: -5px;\n\t\ttop: 95px;\n\t\ttransform: skewX(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n']))),x=function(t){var n=t.startClick;return Object(p.jsx)(d,{children:Object(p.jsx)(b,{onClick:n,children:"Start"})})},j=e(5),h=e(6),O=e(22),g=e(23),m=e.n(g),v=e(24),S=e(21),z=e.n(S);function w(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var k,y,C,E,I,L,N,J,M,R,T,D,A,F,B,V,G,K,P,H,U,W,X,Y,q,Q,Z=e.p+"static/media/background.d0849852.jpg",$=f.a.div(k||(k=Object(s.a)(["\n\tbackground-color: ",";\n\ttransition: background-color 0.5s;\n\tborder: ","px solid white;\n\t","\n\tfont-family: 'Orbitron', sans-serif;\n\tpadding: ","px\n\t\t","px; /*15*/\n\tmargin-bottom: ","px; /*10*/\n"])),(function(t){return t.backgroundColor?t.backgroundColor:"black"}),(function(t){return t.borderSize?t.borderSize:"3"}),(function(t){return!t.portrait&&"width: 100%;"}),(function(t){return t.padding?t.padding:"15"}),(function(t){return t.portrait?t.padding/2:0}),(function(t){return t.margin?t.margin:"10"})),_=f.a.div(y||(y=Object(s.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]))),tt=f.a.div(C||(C=Object(s.a)(["\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n"]))),nt=function(t){var n=t.title,e=t.value,r=t.padding,i=t.margin,o=t.borderSize,c=t.portrait,a=t.backgroundColor;return Object(p.jsxs)($,{portrait:c,padding:r,margin:i,borderSize:o,backgroundColor:a,children:[Object(p.jsx)(_,{children:n}),Object(p.jsx)(tt,{children:e})]})},et=f.a.div(E||(E=Object(s.a)(["\n\tposition: fixed;\n\ttop: 0;\n  \tleft: 0;\n  \tright: 0;\n  \tbottom: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 100;\n\tbackground-color: rgba(0,0,0,0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),rt=f.a.div(I||(I=Object(s.a)(["\n\ttransition: all 0.2s;\n\twidth: ","px;\n\theight: ","px;\n\tborder: ","px solid white;\n\tbackground-color: ",";\n\tfont-size: ","px;\n\tfont-family: 'Orbitron', sans-serif;\n\tcolor: white;\n\tdisplay: flex;\n\tflex-flow: column;\n"])),(function(t){return t.pixelSize*(t.portrait?12:20)}),(function(t){return t.pixelSize*(t.portrait?20:10)}),(function(t){return t.pixelSize/10}),(function(t){return t.theme3d?"#444":"#000"}),(function(t){return t.pixelSize})),it=f.a.div(L||(L=Object(s.a)(["\n\twidth: 100%;\n\tfont-size: 2em;\n\tpadding: ","% 0;\n\ttext-align: center;\n\tborder-bottom: 1px solid white;\n\tflex: 0 1 auto;\n"])),(function(t){return t.portrait?10:2})),ot=f.a.div(N||(N=Object(s.a)(["\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-evenly;\n"]))),ct=f.a.div(J||(J=Object(s.a)(["\n\ttext-align: center;\n"]))),at=f.a.div(M||(M=Object(s.a)(["\n\tflex: 0 1 auto;\n\tpadding: ","% 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-top: 1px solid white;\n"])),(function(t){return t.portrait?10:2})),lt=f.a.button(R||(R=Object(s.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tfont-size: ","px;\n\tfont-family: 'Orbitron', sans-serif;\n\tcolor: white;\n\tborder: ","px solid white;\n\tborder-radius: ","px;\n\tbackground-color: rgba(0,0,0,0);\n\ttransition: all 0.5s;\n\t:hover {\n\t\tcolor: #222;\n\t\tborder: ","px solid rgba(0,0,0,0);\n\t\tbackground-color: white;\n\t}\n"])),(function(t){return 10*t.pixelSize}),(function(t){return 2*t.pixelSize}),(function(t){return t.pixelSize/1.5}),(function(t){return t.pixelSize/20}),(function(t){return t.pixelSize/10}),(function(t){return t.pixelSize/20})),ut=function(t){var n=t.status,e=t.portrait,r=t.pixelSize,i=t.theme3d,o=t.restartClick;return Object(p.jsx)(et,{children:Object(p.jsxs)(rt,{portrait:e,pixelSize:r,theme3d:i,children:[Object(p.jsx)(it,{portrait:e,children:"Game Over"}),Object(p.jsxs)(ot,{children:[Object(p.jsxs)(ct,{children:["SCORE: ",n.score]}),Object(p.jsxs)(ct,{children:["LEVEL: ",n.level]}),Object(p.jsxs)(ct,{children:["LINES: ",n.lines]})]}),Object(p.jsx)(at,{portrait:e,children:Object(p.jsx)(lt,{pixelSize:r,onClick:function(){return o()},children:"Restart"})})]})})},st=e(16),ft=e.n(st),pt=f.a.div(T||(T=Object(s.a)(["\n\twidth: 100vw;\n\theight: ","vh;\n\tdisplay: flex;\n\tflex-direction: ",";\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(",");\n\tbackground-size: cover;\n\tbackground-position: center;\n"])),(function(t){return t.portrait?"95":"100"}),(function(t){return t.portrait?"column":"row"}),Z),dt=f.a.div(D||(D=Object(s.a)(["\n\t","\n\t","\n\tmargin-right: ","px;\n\tmargin-bottom: ","px;\n\tdisplay: flex;\n\tflex-direction: ",";\n\tjustify-content: ",";\n\talign-items: center;\n"])),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0}),(function(t){return t.portrait?"row":"column"}),(function(t){return t.portrait?"space-between":"flex-start"})),bt=f.a.div(A||(A=Object(s.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tbackground-color: ",";\n\ttransition: background-color 0.5;\n\tborder: ","px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-bottom: ","px;\n\tmargin-right: ","px;\n"])),(function(t){return 3*t.pixelSize}),(function(t){return 3*t.pixelSize}),(function(t){return t.theme3d?"#444":"black"}),(function(t){return t.pixelSize/10}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0})),xt=f.a.div(F||(F=Object(s.a)(["\n\tborder: ","px solid white;\n\tbackground-color: ",";\n\ttransition: background-color 0.5s;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n"])),(function(t){return t.pixelSize/10}),(function(t){return t.theme3d?"#444":"black"})),jt=f.a.div(B||(B=Object(s.a)(["\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),ht=f.a.div(V||(V=Object(s.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ","px;\n"])),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6})),Ot=c.a.memo(f.a.div(G||(G=Object(s.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tbackground-color: ",";\n\tposition: relative;\n\tz-index: ",";\n\t",";\n\t",";\n\t",";\n\t",";\n"])),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return t.stage?t.pixelSize:t.pixelSize/1.6}),(function(t){return 1===t.fill?t.color:"inherited"}),(function(t){return t.zIndex}),(function(t){return t.paused&&"\n\t\ttransition: all 1s;\n\t"}),(function(t){return t.fill&&t.theme3d&&";\n\t\tbox-shadow: ".concat(t.pixelSize/4.16,"px ").concat(t.pixelSize/4.16,"px ").concat(t.pixelSize/5.55,"px #222").concat(t.topTetromino?", 0 ".concat(-t.pixelSize/4.16,"px 0 ").concat(ft()(t.color).lighten(.2)):""," \n\t")}),(function(t){return!t.theme3d&&"\n\t\tborder-left: 1px solid ".concat(t.stage||t.fill||t.hint?"#222":"black",";\n\t\tborder-top: 1px solid ").concat(t.stage||t.fill||t.hint?"#222":"black",";\t\n\t")}),(function(t){return t.hint&&"\n\t\tborder: 1px solid ".concat(ft()(t.playerColor).alpha(.5),";\n\t\tbackground-color: rgba(255,255,255,0.1);\n\t")}))),gt=f.a.div(K||(K=Object(s.a)(["\n\t",";\n"])),(function(t){return t.portrait&&"\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t"})),mt=f.a.div(P||(P=Object(s.a)(["\n\twidth: ","px;\n\t","\n\t","\n\tmargin-left: ","px;\n\tmargin-top: ","px;\n\tdisplay: flex;\n\tflex-direction: ",";\n\talign-items: center;\n\tjustify-content: ",";\n\tfont-size: ","px;\n"])),(function(t){return 8*t.pixelSize}),(function(t){return!t.portrait&&"height: ".concat(18*t.pixelSize+6,"px;")}),(function(t){return t.portrait&&"width: ".concat(10*t.pixelSize+10/3*1,"px;")}),(function(t){return t.portrait?0:t.pixelSize/3}),(function(t){return t.portrait?t.pixelSize/3:0}),(function(t){return t.portrait?"row":"column"}),(function(t){return t.portrait?"space-between":"flex-start"}),(function(t){return t.pixelSize})),vt=function(t){var n=t.lose,e=t.restartClick,r=t.map,i=t.player,c=t.hint,a=t.status,l=t.paused,s=Object(v.a)(t,["lose","restartClick","map","player","hint","status","paused"]),f=Object(o.useState)(30),d=Object(u.a)(f,2),b=d[0],x=d[1],h=Object(o.useState)(!1),O=Object(u.a)(h,2),g=O[0],m=O[1],S=function(){var t=Object(o.useState)(w()),n=Object(u.a)(t,2),e=n[0],r=n[1];return Object(o.useEffect)((function(){function t(){r(w())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),e}(),k=S.width,y=S.height,C=Object(o.useState)(!1),E=Object(u.a)(C,2),I=E[0],L=E[1],N=Object(o.useState)(),J=Object(u.a)(N,2),M=J[0],R=J[1],T=Object(o.useRef)(null);return Object(o.useEffect)((function(){var t=y/20,n=k/32;g&&(t=y/26,n=k/12),x(n<t?n:t),m(y>k)}),[k,y,g]),Object(o.useEffect)((function(){i.next&&R(function(t){var n=[],e={};t.forEach((function(t,r){var i=0;t.forEach((function(t){return i+=t})),i>0&&n.push(t),t.forEach((function(t,n){e[n]=(e[n]?e[n]:0)+t}))}));var r=[];return n.forEach((function(t,n){var i=[];t.forEach((function(t,n){e[n]>0&&i.push(t)})),r.push(i)})),r}(i.next.tetromino))}),[i.next]),Object(o.useEffect)((function(){n||T.current.focus()}),[n]),Object(o.useEffect)((function(){T.current.focus()}),[I]),Object(p.jsxs)("div",{children:[Object(p.jsxs)(pt,{portrait:g,children:[M&&Object(p.jsxs)(dt,{portrait:g,pixelSize:b,children:[Object(p.jsx)(bt,{portrait:g,theme3d:I,pixelSize:b,children:M.map((function(t,n){return Object(p.jsx)(ht,{pixelSize:b,children:t.map((function(t,e){var r=t&&(!M[n-1]||!M[n-1][e]);return Object(p.jsx)(Ot,{paused:l,theme3d:I,topTetromino:r,zIndex:n,pixelSize:b,fill:t,color:i.next.color},"pixel-".concat(e))}))},"row-".concat(n))}))}),Object(p.jsx)(gt,{portrait:g,children:Object(p.jsx)(z.a,{width:2*b,height:b/1.2,onChange:L,checked:I,offColor:"#000",onColor:"#444",uncheckedIcon:Object(p.jsx)(jt,{children:Object(p.jsx)(Ot,{theme3d:!1,pixelSize:b/3,stage:"true",fill:1,color:"#e54b4b"})}),checkedIcon:Object(p.jsx)(jt,{children:Object(p.jsx)(Ot,{theme3d:"true",pixelSize:b/3,stage:"true",fill:1,color:"#e54b4b",topTetromino:"true"})})})})]}),r&&Object(p.jsx)(xt,Object(j.a)(Object(j.a)({ref:T},s),{},{theme3d:I,pixelSize:b,children:r.map((function(t,n){return Object(p.jsx)(ht,{stage:"true",pixelSize:b,children:t.map((function(t,e){var o=i.tetromino.tetromino[n-i.pos[0]]&&i.tetromino.tetromino[n-i.pos[0]][e-i.pos[1]],a=c.tetromino.tetromino[n-c.pos[0]]&&c.tetromino.tetromino[n-c.pos[0]][e-c.pos[1]],u=(o||t.fill)&&(!i.tetromino.tetromino[n-i.pos[0]-1]||!i.tetromino.tetromino[n-i.pos[0]-1][e-i.pos[1]])&&(!r[n-1]||!r[n-1][e].fill),s=o||t.fill||!a?n:99;return Object(p.jsx)(Ot,{paused:l,theme3d:I,hint:!t.fill&&!o&&a,pixelSize:b,stage:"true",fill:t.fill||o,color:o?i.tetromino.color:t.color,playerColor:i.tetromino.color,topTetromino:u,zIndex:s},"pixel-".concat(e))}))},"row-".concat(n))}))})),a&&Object(p.jsxs)(mt,{portrait:g,pixelSize:b,children:[Object(p.jsx)(nt,{backgroundColor:I?"#444":"black",portrait:g,borderSize:b/10,margin:b/3,padding:b/2,title:"SCORE",value:a.score}),Object(p.jsx)(nt,{backgroundColor:I?"#444":"black",portrait:g,borderSize:b/10,margin:b/3,padding:b/2,title:"LEVEL",value:a.level}),Object(p.jsx)(nt,{backgroundColor:I?"#444":"black",portrait:g,borderSize:b/10,margin:b/3,padding:b/2,title:"LINES",value:a.lines})]})]}),n&&Object(p.jsx)(ut,{portrait:g,restartClick:e,status:a,pixelSize:b,theme3d:I})]})};var St=f.a.div(H||(H=Object(s.a)(["\n\tposition: fixed;\n\ttop: 0;\n  \tleft: 0;\n  \tright: 0;\n  \tbottom: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 100;\n\tbackground-color: rgba(0,0,0,0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),zt=f.a.div(U||(U=Object(s.a)(["\n\ttransition: all 0.2s;\n\twidth: ","px;\n\theight: ","px;\n\tborder: ","px solid white;\n\tbackground-color: ",";\n\tfont-size: ","px;\n\tfont-family: 'Orbitron', sans-serif;\n\tcolor: white;\n\tdisplay: flex;\n\tflex-flow: column;\n"])),(function(t){return t.pixelSize*(t.portrait?12:20)}),(function(t){return t.pixelSize*(t.portrait?20:10)}),(function(t){return t.pixelSize/10}),(function(t){return t.theme3d?"#444":"#000"}),(function(t){return t.pixelSize})),wt=f.a.div(W||(W=Object(s.a)(["\n\twidth: 100%;\n\tfont-size: 2em;\n\tpadding: ","% 0;\n\ttext-align: center;\n\tborder-bottom: 1px solid white;\n\tflex: 0 1 auto;\n"])),(function(t){return t.portrait?10:2})),kt=f.a.div(X||(X=Object(s.a)(["\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-evenly;\n"]))),yt=f.a.div(Y||(Y=Object(s.a)(["\n\ttext-align: center;\n"]))),Ct=f.a.div(q||(q=Object(s.a)(["\n\tflex: 0 1 auto;\n\tpadding: ","% 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-top: 1px solid white;\n"])),(function(t){return t.portrait?10:2})),Et=f.a.button(Q||(Q=Object(s.a)(["\n\twidth: ","px;\n\theight: ","px;\n\tfont-size: ","px;\n\tfont-family:'Orbitron', sans-serif;\n\tcolor: white;\n\tborder: ","px solid white;\n\tborder-radius: ","px;\n\tbackground-color: rgba(0,0,0,0);\n\ttransition: all 0.5s;\n\t:hover {\n\t\tcolor: #222;\n\t\tborder: ","px solid rgba(0,0,0,0);\n\t\tbackground-color: white;\n\t}\n"])),(function(t){return 10*t.pixelSize}),(function(t){return 2*t.pixelSize}),(function(t){return t.pixelSize/1.5}),(function(t){return t.pixelSize/20}),(function(t){return t.pixelSize/10}),(function(t){return t.pixelSize/20})),It=function(t){var n=t.status,e=t.portrait,r=t.pixelSize,i=t.theme3d,o=t.restartClick;return Object(p.jsx)(St,{children:Object(p.jsxs)(zt,{portrait:e,pixelSize:r,theme3d:i,children:[Object(p.jsx)(wt,{portrait:e,children:"Game Over"}),Object(p.jsxs)(kt,{children:[Object(p.jsxs)(yt,{children:["SCORE: ",n]}),Object(p.jsxs)(yt,{children:["LEVEL: ",n]}),Object(p.jsxs)(yt,{children:["LINES: ",n]})]}),Object(p.jsx)(Ct,{portrait:e,children:Object(p.jsx)(Et,{pixelSize:r,onClick:function(){return o()},children:"Restart"})})]})})},Lt=function(t,n){for(var e=n.map((function(t){return t.slice()})),r=0;r<t.tetromino.tetromino.length;r++)for(var i=0;i<t.tetromino.tetromino.length;i++)if(1===t.tetromino.tetromino[r][i]){var o=t.pos[0]+r,c=t.pos[1]+i;e[o][c]={fill:1,color:t.tetromino.color}}return e},Nt=Object(h.a)(new Array(18)).map((function(){return Object(h.a)(new Array(10)).map((function(){return{fill:0,color:[]}}))})),Jt=["#e54b4b","#9a031e","#fcdc4d","#005397","#0bbcd6","#20ad65","#f8ebee"],Mt={tetromino:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]},Rt={tetromino:[[1,1],[1,1]]},Tt={tetromino:[[0,0,0],[1,1,1],[0,1,0]]},Dt={tetromino:[[0,1,0],[0,1,0],[1,1,0]]},At={tetromino:[[0,1,0],[0,1,0],[0,1,1]]},Ft={tetromino:[[0,1,1],[1,1,0],[0,0,0]]},Bt={tetromino:[[1,1,0],[0,1,1],[0,0,0]]},Vt=function(){var t=[Mt,Rt,Tt,Dt,At,Ft,Bt],n=t[Math.floor(Math.random()*t.length)];return n.color=Jt[Math.floor(Math.random()*Jt.length)],n},Gt=function(t){var n,e;return t&&t.next&&(n=JSON.parse(JSON.stringify(t.next)),e=Vt()),n||(n=Vt()),e||(e=Vt()),{pos:[0,Math.floor(4)],tetromino:n,next:e}},Kt=function(){var t=Object(o.useState)(Nt),n=Object(u.a)(t,2),e=n[0],r=n[1],i=Object(o.useState)(),a=Object(u.a)(i,2),l=a[0],s=a[1],f=Object(o.useState)(!1),d=Object(u.a)(f,2),b=d[0],x=d[1],g=Object(o.useState)(!1),v=Object(u.a)(g,2),S=v[0],z=v[1],w=Object(o.useState)(Date.now()),k=Object(u.a)(w,2),y=k[0],C=k[1],E=Object(o.useState)(),I=Object(u.a)(E,2),L=I[0],N=I[1],J=Object(o.useState)(!0),M=Object(u.a)(J,2),R=M[0],T=M[1],D=Object(o.useState)(0),A=Object(u.a)(D,2),F=A[0],B=A[1],V=Object(o.useState)(0),G=Object(u.a)(V,2),K=G[0],P=G[1],H=Object(o.useState)(1),U=Object(u.a)(H,2),W=U[0],X=U[1],Y=Object(o.useState)(0),q=Object(u.a)(Y,2),Q=q[0],Z=q[1],$=Object(o.useState)(0),_=Object(u.a)($,2),tt=_[0],nt=_[1],et=Object(o.useState)(!1),rt=Object(u.a)(et,2),it=rt[0],ot=rt[1];Object(o.useEffect)((function(){var t=W+1,n=1e3*t*t*t/5;console.log("Current level: ",W),console.log("Score to next level:",n),console.log("Remaining: ",n-K),K>=n&&X(W+1)}),[W,K]);var ct=function(){ot(!0)},at=function(){s(l?function(t){var n=dt("down");if(t.pos===n){r((function(n){var e=Lt(t,n);return console.log(t),st(e)}));var e=Gt(t);return ft(e.pos,e.tetromino)||ct(),e}return Object(j.a)(Object(j.a)({},t),{},{pos:n})}:Gt())},lt=function(){var t=JSON.parse(JSON.stringify(l)),n=t.tetromino.tetromino.map((function(n,e){return t.tetromino.tetromino.map((function(t){return t[e]}))}));n=n.map((function(t){return t.reverse()})),ft(l.pos,{tetromino:n})&&s(Object(j.a)(Object(j.a)({},l),{},{tetromino:Object(j.a)(Object(j.a)({},l.tetromino),{},{tetromino:n})}))},ut=function(){S||it||s((function(t){var n=JSON.parse(JSON.stringify(t));n.pos=Object(h.a)(L.pos),r((function(t){var e=Lt(n,t);return st(e)}));var e=Gt(t);return ft(e.pos,e.tetromino)||ct(),e}))},st=c.a.useCallback((function(t){var n=[];if(t.forEach((function(t,e){var r=!0;t.forEach((function(t,n){0===t.fill&&(r=!1)})),r&&n.push(e)})),n.length>0){var e=t.slice();n.forEach((function(t){for(var n=e.length-1;n>=0;n--)n<=t&&(e[n]=n>0?e[n-1]:Object(h.a)(new Array(10)).map((function(){return{fill:0,color:[]}})))})),B((function(t){return t+n.length}));var r=W*W*100,i=40*(n.length*n.length-1);return P((function(t){return t+300*n.length+i+r})),e}return t}),[W]),ft=c.a.useCallback((function(t,n){for(var r=0;r<n.tetromino.length;r++)for(var i=0;i<n.tetromino[r].length;i++)if(1===n.tetromino[r][i]){var o=t[0]+r,c=t[1]+i;if(o>18||c<0||c>10||!e[o]||!e[o][c]||1===e[o][c].fill)return!1}return!0}),[e]),pt=c.a.useCallback((function(t){for(var n=JSON.parse(JSON.stringify(t.tetromino)),e=Object(h.a)(t.pos);ft([e[0]+1,e[1]],n);)e=[e[0]+1,e[1]];return{pos:e,tetromino:n}}),[ft]),dt=c.a.useCallback((function(t){var n;if(l)return"down"===t&&(n=[l.pos[0]+1,l.pos[1]]),"left"===t&&(n=[l.pos[0],l.pos[1]-1]),"right"===t&&(n=[l.pos[0],l.pos[1]+1]),ft(n,l.tetromino)?n:l.pos}),[l,ft]);!function(t,n){var e=Object(o.useRef)();Object(o.useEffect)((function(){e.current=t}),[t]),Object(o.useEffect)((function(){if(null!==n){var t=setInterval((function(){e.current()}),n);return function(){return clearInterval(t)}}}),[n])}((function(){at()}),S||it?null:b?50:450-20*(W-1)),Object(o.useEffect)((function(){l&&N(pt(l))}),[l,pt]);var bt=Object(O.a)((function(t){var n=t.down,e=Object(u.a)(t.movement,2),r=e[0],i=e[1],o=t.velocity;n?(Math.abs(r-Q)>20&&(s(r-Q>0?function(t){return Object(j.a)(Object(j.a)({},t),{},{pos:dt("right")})}:function(t){return Object(j.a)(Object(j.a)({},t),{},{pos:dt("left")})}),Z(r)),Math.abs(i-tt)>20&&(o>1?R&&(T(!1),ut()):i-tt>0&&at(),nt(i))):(Z(0),nt(0),T(!0))}),{filterTaps:!0,lockDirection:!0});return l&&e&&L?Object(p.jsx)(vt,Object(j.a)({lose:it,restartClick:function(){return r(Nt),B(0),P(0),X(1),void ot(!1)},map:e,player:l,hint:L,paused:S,status:{lines:F,score:K,level:W},onBlur:function(){return z(!0)},onFocus:function(){return z(!1)},tabIndex:"0",onKeyUp:function(t){var n=t.keyCode;if(!S&&!it){40===n&&(x(!1),Date.now()-y<=80&&at()),32===n&&T(!0)}},onKeyDown:function(t){var n=t.keyCode;if(!S&&!it)switch(n){case 37:s((function(t){return Object(j.a)(Object(j.a)({},t),{},{pos:dt("left")})}));break;case 38:lt();break;case 39:s((function(t){return Object(j.a)(Object(j.a)({},t),{},{pos:dt("right")})}));break;case 40:C(Date.now()),x(!0);break;case 32:R&&(T(!1),ut())}},onClick:function(){return lt()}},bt())):Object(p.jsx)(It,{children:Object(p.jsx)(m.a,{color:"#C41212"})})},Pt=function(){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),e=n[0],r=n[1];return e?Object(p.jsx)(Kt,{stopClick:function(){return r(!1)}}):Object(p.jsx)(x,{startClick:function(){return r(!0)}})};function Ht(){return Object(p.jsx)(Pt,{})}var Ut=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,49)).then((function(n){var e=n.getCLS,r=n.getFID,i=n.getFCP,o=n.getLCP,c=n.getTTFB;e(t),r(t),i(t),o(t),c(t)}))};l.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(Ht,{})}),document.getElementById("root")),Ut()}},[[47,1,2]]]);
//# sourceMappingURL=main.295638bf.chunk.js.map