{"version":3,"sources":["components/StartPage/index.js","hooks/useWindowDimensions.js.js","images/background.jpg","components/StatusRow/index.js","components/LoseGame/index.js","components/Stage/index.js","components/Center/index.js","utils/index.js","components/Game/index.js","hooks/useInterval.js","components/Connection/index.js","App.js","reportWebVitals.js","index.js"],"names":["StyledStartPage","styled","div","StartButton","button","StartPage","startClick","onClick","getWindowDimensions","window","width","innerWidth","height","innerHeight","Container","props","backgroundColor","borderSize","portrait","padding","margin","Title","Value","StatusRow","title","value","CenterOverlay","LoseContainer","pixelSize","theme3d","ContainerStatus","ContainerButton","Button","LoseGame","status","restartClick","score","level","lines","Game","background","ContainerNext","Next","StyledStage","Center","Row","stage","Pixel","React","memo","fill","color","zIndex","paused","topTetromino","Color","lighten","hint","playerColor","alpha","ContainerSwitch","Stage","lose","map","player","others","useState","setPixelSize","setPortrait","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","setTheme3d","nextRender","setNextRender","stageRef","useRef","pixelSizeHeight","pixelSizeWidth","next","tetromino","trimRowTetromino","sumColumn","forEach","row","y","rowSum","pixel","push","x","trimTetromino","newRow","getRenderTetromino","current","focus","onChange","checked","offColor","onColor","uncheckedIcon","checkedIcon","ref","playerFill","pos","playerHint","PrintPlayerInMap","newMap","arr","slice","length","pixelY","pixelX","initialMap","Array","colors","I","O","T","J","L","S","Z","getRandomTetromino","tetrominos","Math","floor","random","getRandomPlayer","JSON","parse","stringify","STAGE_WIDTH","setMap","setPlayer","down","setDown","pause","setPause","Date","now","tick","setTick","hintPlayer","setHintPlayer","spaceReleased","setSpaceReleased","setlines","setScore","setLevel","dragX","setDragX","dragY","setDragY","gameOver","setGameOver","nextLevel","nextLevelScore","console","log","loseGame","drop","newPos","getNewPlayerPos","mapWithPlayer","checkMap","newPlayer","validatePosition","rotatePlayer","clonedPlayer","mtrx","_","index","column","reverse","forwardDown","playerCopy","useCallback","rowsClear","clear","mapY","quant","bonusLevel","bonusRows","mapX","calculateHintPlayer","hintTetromino","hintPosition","movement","callback","delay","savedCallback","id","setInterval","clearInterval","useInterval","bind","useDrag","mx","my","velocity","abs","filterTaps","lockDirection","onBlur","onFocus","tabIndex","onKeyUp","keyCode","onKeyDown","Connection","runing","setRuning","stopClick","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.295638bf.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nconst StyledStartPage = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\toverflow: hidden;\n\tbackground-color: #0A08A2;\n`;\n\nconst StartButton = styled.button`\n\tfont-size: 2.2em;\n\tfont-family: 'Orbitron', sans-serif;\n\t/* border: 2px solid #222; */\n\tborder: none;\n\tpadding: 30px 100px;\n\tbackground-color: #fff;\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tvertical-align: middle;\n\ttext-decoration: none;\n\ttransition: all 0.5s;\n\tcolor: #95190c;\n\tborder-right: 1px solid #eee;\n\tborder-radius: 2px;\n\tborder-bottom: 1px solid #ccc;\n\t:focus {\n\t\toutline: 0;\n\t}\n\t:hover {\n\t\tmargin-left: 5px;\n\t\tmargin-top: 5px;\n\t\t::after {\n\t\t\tright: -5px;\n\t\t\ttop: 2px;\n\t\t\twidth: 5px;\n\t\t}\n\t\t::before {\n\t\t\tright: -3px;\n\t\t\theight: 5px;\n\t\t}\n\t}\n\t::after {\n\t\tcontent: \"\";\n\t\theight: 100%;\n\t\twidth: 10px;\n\t\tbackground-color: #eee;\n\t\tright: -10px;\n\t\ttop: 5px;\n\t\ttransform: skewY(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n\t::before {\n\t\tcontent: \"\";\n\t\theight: 10px;\n\t\twidth: 100%;\n\t\tbackground-color: #ccc;\n\t\tright: -5px;\n\t\ttop: 95px;\n\t\ttransform: skewX(45deg);\n\t\tposition: absolute;\n\t\ttransition: all 0.5s;\n\t}\n`;\n\nconst StartPage = ({ startClick }) => {\n\treturn (\n\t\t<StyledStartPage>\n\t\t\t<StartButton onClick={startClick}>Start</StartButton>\n\t\t</StyledStartPage>\n\t);\n};\nexport default StartPage;","import { useState, useEffect } from 'react';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","export default __webpack_public_path__ + \"static/media/background.d0849852.jpg\";","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n\tbackground-color: ${props =>\n\t\tprops.backgroundColor ? props.backgroundColor : \"black\"};\n\ttransition: background-color 0.5s;\n\tborder: ${props => (props.borderSize ? props.borderSize : \"3\")}px solid white;\n\t${props => !props.portrait && `width: 100%;`}\n\tfont-family: 'Orbitron', sans-serif;\n\tpadding: ${props => (props.padding ? props.padding : \"15\")}px\n\t\t${props => (props.portrait ? props.padding / 2 : 0)}px; /*15*/\n\tmargin-bottom: ${props => (props.margin ? props.margin : \"10\")}px; /*10*/\n`;\n\nconst Title = styled.div`\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n`;\n\nconst Value = styled.div`\n\twidth: 100%;\n\ttext-align: center;\n\tcolor: white;\n`;\n\nconst StatusRow = ({\n\ttitle,\n\tvalue,\n\tpadding,\n\tmargin,\n\tborderSize,\n\tportrait,\n\tbackgroundColor\n}) => (\n\t<Container\n\t\tportrait={portrait}\n\t\tpadding={padding}\n\t\tmargin={margin}\n\t\tborderSize={borderSize}\n\t\tbackgroundColor={backgroundColor}\n\t>\n\t\t<Title>{title}</Title>\n\t\t<Value>{value}</Value>\n\t</Container>\n);\n\nexport default StatusRow;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst CenterOverlay = styled.div`\n\tposition: fixed;\n\ttop: 0;\n  \tleft: 0;\n  \tright: 0;\n  \tbottom: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 100;\n\tbackground-color: rgba(0,0,0,0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst LoseContainer = styled.div`\n\ttransition: all 0.2s;\n\twidth: ${props => props.pixelSize * (props.portrait ? 12 : 20)}px;\n\theight: ${props => props.pixelSize * (props.portrait ? 20 : 10)}px;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => props.theme3d ? '#444' : '#000'};\n\tfont-size: ${props => props.pixelSize}px;\n\tfont-family: 'Orbitron', sans-serif;\n\tcolor: white;\n\tdisplay: flex;\n\tflex-flow: column;\n`;\n\nconst Title = styled.div`\n\twidth: 100%;\n\tfont-size: 2em;\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\n\ttext-align: center;\n\tborder-bottom: 1px solid white;\n\tflex: 0 1 auto;\n`;\n\nconst ContainerStatus = styled.div`\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-evenly;\n`;\n\nconst StatusRow = styled.div`\n\ttext-align: center;\n`;\n\nconst ContainerButton = styled.div`\n\tflex: 0 1 auto;\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-top: 1px solid white;\n`;\n\nconst Button = styled.button`\n\twidth: ${props => props.pixelSize * 10}px;\n\theight: ${props => props.pixelSize * 2}px;\n\tfont-size: ${props => props.pixelSize / 1.5}px;\n\tfont-family: 'Orbitron', sans-serif;\n\tcolor: white;\n\tborder: ${props => props.pixelSize / 20}px solid white;\n\tborder-radius: ${props => props.pixelSize / 10}px;\n\tbackground-color: rgba(0,0,0,0);\n\ttransition: all 0.5s;\n\t:hover {\n\t\tcolor: #222;\n\t\tborder: ${props => props.pixelSize / 20}px solid rgba(0,0,0,0);\n\t\tbackground-color: white;\n\t}\n`;\n\nconst LoseGame = ({status, portrait, pixelSize, theme3d, restartClick}) => (\n\t<CenterOverlay>\n\t\t<LoseContainer portrait={portrait} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t<Title portrait={portrait}>Game Over</Title>\n\t\t\t<ContainerStatus>\n\t\t\t\t<StatusRow>SCORE: {status.score}</StatusRow>\n\t\t\t\t<StatusRow>LEVEL: {status.level}</StatusRow>\n\t\t\t\t<StatusRow>LINES: {status.lines}</StatusRow>\n\t\t\t</ContainerStatus>\n\t\t\t<ContainerButton portrait={portrait}>\n\t\t\t\t<Button pixelSize={pixelSize} onClick={() => restartClick()}>Restart</Button>\n\t\t\t</ContainerButton>\n\t\t</LoseContainer>\n\t</CenterOverlay>\n);\n\nexport default LoseGame;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Switch from \"react-switch\";\n\nimport useWindowDimensions from \"../../hooks/useWindowDimensions.js\"\nimport background from \"../../images/background.jpg\";\nimport StatusRow from \"../StatusRow\";\nimport LoseGame from '../LoseGame';\n\nimport Color from \"color\";\n\nconst Game = styled.div`\n\twidth: 100vw;\n\theight: ${props => (props.portrait ? \"95\" : \"100\")}vh;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"column\" : \"row\")};\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(${background});\n\tbackground-size: cover;\n\tbackground-position: center;\n`;\n\nconst ContainerNext = styled.div`\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-right: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-bottom: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\talign-items: center;\n`;\n\nconst Next = styled.div`\n\twidth: ${props => props.pixelSize * 3}px;\n\theight: ${props => props.pixelSize * 3}px;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-bottom: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-right: ${props => (!props.portrait ? 0 : props.pixelSize / 3)}px;\n`;\n\nconst StyledStage = styled.div`\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5s;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Center = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Row = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n`;\n\nconst Pixel = React.memo(styled.div`\n\twidth: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\tbackground-color: ${props => (props.fill === 1 ? props.color : \"inherited\")};\n\tposition: relative;\n\tz-index: ${props => props.zIndex};\n\t${props =>\n\t\tprops.paused &&\n\t\t`\n\t\ttransition: all 1s;\n\t`};\n\t${props =>\n\t\tprops.fill &&\n\t\tprops.theme3d &&\n\t\t`;\n\t\tbox-shadow: ${props.pixelSize / 4.16}px ${props.pixelSize /\n\t\t\t4.16}px ${props.pixelSize / 5.55}px #222${\n\t\t\tprops.topTetromino\n\t\t\t\t? `, 0 ${-props.pixelSize / 4.16}px 0 ${Color(props.color).lighten(0.2)}`\n\t\t\t\t: \"\"\n\t\t} \n\t`};\n\t${props =>\n\t\t!props.theme3d &&\n\t\t`\n\t\tborder-left: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\n\t\tborder-top: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\t\n\t`};\n\t${props =>\n\t\tprops.hint &&\n\t\t`\n\t\tborder: 1px solid ${Color(props.playerColor).alpha(0.5)};\n\t\tbackground-color: rgba(255,255,255,0.1);\n\t`};\n`);\n\nconst ContainerSwitch = styled.div`\n\t${props =>\n\t\tprops.portrait &&\n\t\t`\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t`};\n`;\n\nconst ContainerStatus = styled.div`\n\twidth: ${props => props.pixelSize * 8}px;\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-left: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-top: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\talign-items: center;\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\tfont-size: ${props => props.pixelSize}px;\n`;\n\nconst getRenderTetromino = tetromino => {\n\tlet trimRowTetromino = [];\n\tlet sumColumn = {};\n\ttetromino.forEach((row, y) => {\n\t\tlet rowSum = 0;\n\t\trow.forEach(pixel => (rowSum = rowSum + pixel));\n\t\tif (rowSum > 0) trimRowTetromino.push(row);\n\t\trow.forEach((pixel, x) => {\n\t\t\tsumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\n\t\t});\n\t});\n\tlet trimTetromino = [];\n\ttrimRowTetromino.forEach((row, y) => {\n\t\tlet newRow = [];\n\t\trow.forEach((pixel, x) => {\n\t\t\tif (sumColumn[x] > 0) newRow.push(pixel);\n\t\t});\n\t\ttrimTetromino.push(newRow);\n\t});\n\treturn trimTetromino;\n};\n\nconst Stage = ({ lose, restartClick, map, player, hint, status, paused, ...others }) => {\n\tconst [pixelSize, setPixelSize] = useState(30);\n\tconst [portrait, setPortrait] = useState(false);\n\tconst { width, height } = useWindowDimensions();\n\tconst [theme3d, setTheme3d] = useState(false);\n\tconst [nextRender, setNextRender] = useState();\n\tconst stageRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tlet pixelSizeHeight = height / 20;\n\t\tlet pixelSizeWidth = width / 32;\n\t\tif (portrait) {\n\t\t\tpixelSizeHeight = height / 26;\n\t\t\tpixelSizeWidth = width / 12;\n\t\t}\n\t\tsetPixelSize(\n\t\t\tpixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight\n\t\t);\n\t\tsetPortrait(height > width);\n\t}, [width, height, portrait]);\n\n\tuseEffect(() => {\n\t\tif (!player.next) return;\n\t\tsetNextRender(getRenderTetromino(player.next.tetromino));\n\t}, [player.next]);\n\n\tuseEffect(() => {\n\t\tif (!lose) {\n\t\t\tstageRef.current.focus();\n\t\t}\n\t}, [lose]);\n\n\tuseEffect(() => {\n\t\tstageRef.current.focus();\n\t}, [theme3d]);\n\n\treturn (\n\t\t<div>\n\t\t\t<Game portrait={portrait}>\n\t\t\t\t{nextRender && (\n\t\t\t\t\t<ContainerNext portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<Next portrait={portrait} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t\t{nextRender.map((row, y) => (\n\t\t\t\t\t\t\t\t<Row pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\t\tlet topTetromino = pixel && (!nextRender[y - 1] || !nextRender[y - 1][x]);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\t\ttopTetromino={topTetromino}\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex={y}\n\t\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={pixel}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={player.next.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Next>\n\t\t\t\t\t\t<ContainerSwitch portrait={portrait}>\n\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\twidth={pixelSize * 2}\n\t\t\t\t\t\t\t\theight={pixelSize / 1.2}\n\t\t\t\t\t\t\t\tonChange={setTheme3d}\n\t\t\t\t\t\t\t\tchecked={theme3d}\n\t\t\t\t\t\t\t\toffColor=\"#000\"\n\t\t\t\t\t\t\t\tonColor=\"#444\"\n\t\t\t\t\t\t\t\tuncheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={false}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t\ttopTetromino=\"true\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ContainerSwitch>\n\t\t\t\t\t</ContainerNext>\n\t\t\t\t)}\n\t\t\t\t{map && (\n\t\t\t\t\t<StyledStage ref={stageRef} {...others} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t{map.map((row, y) => (\n\t\t\t\t\t\t\t<Row stage=\"true\" pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\tlet playerFill =\n\t\t\t\t\t\t\t\t\t\tplayer.tetromino.tetromino[y - player.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\tplayer.tetromino.tetromino[y - player.pos[0]][x - player.pos[1]];\n\t\t\t\t\t\t\t\t\tlet playerHint =\n\t\t\t\t\t\t\t\t\t\thint.tetromino.tetromino[y - hint.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\thint.tetromino.tetromino[y - hint.pos[0]][x - hint.pos[1]];\n\t\t\t\t\t\t\t\t\tlet topTetromino =\n\t\t\t\t\t\t\t\t\t\t(playerFill || pixel.fill) &&\n\t\t\t\t\t\t\t\t\t\t(!player.tetromino.tetromino[y - player.pos[0] - 1] ||\n\t\t\t\t\t\t\t\t\t\t\t!player.tetromino.tetromino[y - player.pos[0] - 1][x - player.pos[1]]) &&\n\t\t\t\t\t\t\t\t\t\t(!map[y - 1] || !map[y - 1][x].fill);\n\t\t\t\t\t\t\t\t\tlet zIndex = !playerFill && !pixel.fill && playerHint ? 99 : y;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\thint={!pixel.fill && !playerFill && playerHint}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\tfill={pixel.fill || playerFill}\n\t\t\t\t\t\t\t\t\t\t\tcolor={playerFill ? player.tetromino.color : pixel.color}\n\t\t\t\t\t\t\t\t\t\t\tplayerColor={player.tetromino.color}\n\t\t\t\t\t\t\t\t\t\t\ttopTetromino={topTetromino}\n\t\t\t\t\t\t\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t\t\t\t\t\t\t></Pixel>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</StyledStage>\n\t\t\t\t)}\n\t\t\t\t{status && (\n\t\t\t\t\t<ContainerStatus portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"SCORE\"\n\t\t\t\t\t\t\tvalue={status.score}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LEVEL\"\n\t\t\t\t\t\t\tvalue={status.level}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LINES\"\n\t\t\t\t\t\t\tvalue={status.lines}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ContainerStatus>\n\t\t\t\t)}\n\t\t\t</Game>\n\t\t\t{ lose && \n\t\t\t\t<LoseGame portrait={portrait} restartClick={restartClick} status={status} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t\t</LoseGame>}\n\t\t</div>\n\t);\n};\n\nexport default Stage;","import React from 'react';\nimport styled from 'styled-components';\n\nconst CenterOverlay = styled.div`\n\tposition: fixed;\n\ttop: 0;\n  \tleft: 0;\n  \tright: 0;\n  \tbottom: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 100;\n\tbackground-color: rgba(0,0,0,0.5);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst LoseContainer = styled.div`\n\ttransition: all 0.2s;\n\twidth: ${props => props.pixelSize * (props.portrait ? 12 : 20)}px;\n\theight: ${props => props.pixelSize * (props.portrait ? 20 : 10)}px;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => props.theme3d ? '#444' : '#000'};\n\tfont-size: ${props => props.pixelSize}px;\n\tfont-family: 'Orbitron', sans-serif;\n\tcolor: white;\n\tdisplay: flex;\n\tflex-flow: column;\n`;\n\nconst Title = styled.div`\n\twidth: 100%;\n\tfont-size: 2em;\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\n\ttext-align: center;\n\tborder-bottom: 1px solid white;\n\tflex: 0 1 auto;\n`;\n\nconst ContainerStatus = styled.div`\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-evenly;\n`;\n\nconst StatusRow = styled.div`\n\ttext-align: center;\n`;\n\nconst ContainerButton = styled.div`\n\tflex: 0 1 auto;\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-top: 1px solid white;\n`;\n\nconst Button = styled.button`\n\twidth: ${props => props.pixelSize * 10}px;\n\theight: ${props => props.pixelSize * 2}px;\n\tfont-size: ${props => props.pixelSize / 1.5}px;\n\tfont-family:'Orbitron', sans-serif;\n\tcolor: white;\n\tborder: ${props => props.pixelSize / 20}px solid white;\n\tborder-radius: ${props => props.pixelSize / 10}px;\n\tbackground-color: rgba(0,0,0,0);\n\ttransition: all 0.5s;\n\t:hover {\n\t\tcolor: #222;\n\t\tborder: ${props => props.pixelSize / 20}px solid rgba(0,0,0,0);\n\t\tbackground-color: white;\n\t}\n`;\n\nconst LoseGame = ({status, portrait, pixelSize, theme3d, restartClick}) => (\n\t<CenterOverlay>\n\t\t<LoseContainer portrait={portrait} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t<Title portrait={portrait}>Game Over</Title>\n\t\t\t<ContainerStatus>\n\t\t\t\t<StatusRow>SCORE: {status}</StatusRow>\n\t\t\t\t<StatusRow>LEVEL: {status}</StatusRow>\n\t\t\t\t<StatusRow>LINES: {status}</StatusRow>\n\t\t\t</ContainerStatus>\n\t\t\t<ContainerButton portrait={portrait}>\n\t\t\t\t<Button pixelSize={pixelSize} onClick={() => restartClick()}>Restart</Button>\n\t\t\t</ContainerButton>\n\t\t</LoseContainer>\n\t</CenterOverlay>\n);\n\nexport default LoseGame;\n","export const PrintPlayerInMap = (player, map) => {\n  var newMap = map.map(arr => arr.slice());\n  for (let y = 0; y < player.tetromino.tetromino.length; y++)\n    for (let x = 0; x < player.tetromino.tetromino.length; x++)\n      if (player.tetromino.tetromino[y][x] === 1) {\n        const pixelY = player.pos[0] + y;\n        const pixelX = player.pos[1] + x;\n        newMap[pixelY][pixelX] = { fill: 1, color: player.tetromino.color };\n      }\n  return newMap;\n};\n\n//This does exactly what it says and prints the player's moves to the map/grid  ","import React, { useState, useEffect } from \"react\";\nimport { useDrag } from \"react-use-gesture\";\nimport BarLoader from \"react-spinners/BarLoader\";\n\nimport Stage from \"../Stage\";\nimport { useInterval } from \"../../hooks/useInterval\";\nimport Center from \"../Center\";\n\nimport { PrintPlayerInMap } from \"../../utils/index\";\n\n\nconst STAGE_HEIGHT = 18;\nconst STAGE_WIDTH = 10;\n\nconst initialMap = [...new Array(STAGE_HEIGHT)].map(() =>\n\t[...new Array(STAGE_WIDTH)].map(() => ({ fill: 0, color: [] }))\n);\n\nconst colors = [\n\t\"#e54b4b\",\n\t\"#9a031e\",\n\t\"#fcdc4d\",\n\t\"#005397\",\n\t\"#0bbcd6\",\n\t\"#20ad65\",\n\t\"#f8ebee\"\n];\n\nconst I = {\n\ttetromino: [\n\t\t[0, 0, 0, 0],\n\t\t[1, 1, 1, 1],\n\t\t[0, 0, 0, 0],\n\t\t[0, 0, 0, 0]\n\t]\n};\n\nconst O = {\n\ttetromino: [\n\t\t[1, 1],\n\t\t[1, 1]\n\t]\n};\n\nconst T = {\n\ttetromino: [\n\t\t[0, 0, 0],\n\t\t[1, 1, 1],\n\t\t[0, 1, 0]\n\t]\n};\n\nconst J = {\n\ttetromino: [\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t\t[1, 1, 0]\n\t]\n};\n\nconst L = {\n\ttetromino: [\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t\t[0, 1, 1]\n\t]\n};\n\nconst S = {\n\ttetromino: [\n\t\t[0, 1, 1],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0]\n\t]\n};\n\nconst Z = {\n\ttetromino: [\n\t\t[1, 1, 0],\n\t\t[0, 1, 1],\n\t\t[0, 0, 0]\n\t]\n};\n\nconst getRandomTetromino = () => {\n\tconst tetrominos = [I, O, T, J, L, S, Z];\n\tconst tetromino = tetrominos[Math.floor(Math.random() * tetrominos.length)];\n\ttetromino.color = colors[Math.floor(Math.random() * colors.length)];\n\treturn tetromino;\n};\nconst getRandomPlayer = player => {\n\tlet tetromino, next;\n\tif (player)\n\t\tif (player.next) {\n\t\t\ttetromino = JSON.parse(JSON.stringify(player.next));\n\t\t\tnext = getRandomTetromino();\n\t\t}\n\tif (!tetromino) tetromino = getRandomTetromino();\n\tif (!next) next = getRandomTetromino();\n\tconst pos = [0, Math.floor(STAGE_WIDTH / 2 - 2 / 2)];\n\treturn { pos, tetromino, next };\n};\n\nconst Game = () => {\n\tconst [map, setMap] = useState(initialMap);\n\tconst [player, setPlayer] = useState();\n\tconst [down, setDown] = useState(false);\n\tconst [pause, setPause] = useState(false);\n\tconst [tick, setTick] = useState(Date.now());\n\tconst [hintPlayer, setHintPlayer] = useState();\n\tconst [spaceReleased, setSpaceReleased] = useState(true);\n\tconst [lines, setlines] = useState(0);\n\tconst [score, setScore] = useState(0);\n\tconst [level, setLevel] = useState(1);\n\tconst [dragX, setDragX] = useState(0);\n\tconst [dragY, setDragY] = useState(0);\n\tconst [gameOver, setGameOver] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst levelBaseScore = 1000;\n\t\tconst nextLevel = level + 1;\n\t\tconst nextLevelScore =\n\t\t\t(levelBaseScore * nextLevel * nextLevel * nextLevel) / 5;\n\t\tconsole.log(\"Current level: \", level);\n\t\tconsole.log(\"Score to next level:\", nextLevelScore);\n\t\tconsole.log(\"Remaining: \", nextLevelScore - score);\n\t\tif (score >= nextLevelScore) setLevel(level + 1);\n\t}, [level, score]);\n\n\tconst restartGame = () => {\n\t\tsetMap(initialMap); \n\t\tsetlines(0);\n\t\tsetScore(0);\n\t\tsetLevel(1);\n\t\tsetGameOver(false);\n\t}\n\n\tconst loseGame = () => {\n\t\tsetGameOver(true);\n\t};\n\n\tconst drop = () => {\n\t\tif (!player) {\n\t\t\tsetPlayer(getRandomPlayer());\n\t\t\treturn;\n\t\t}\n\t\tsetPlayer(player => {\n\t\t\tconst newPos = getNewPlayerPos(\"down\");\n\t\t\tif (player.pos === newPos) {\n\t\t\t\tsetMap(map => {\n\t\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(player, map);\n\t\t\t\t\tconsole.log(player)\n\t\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\n\t\t\t\t\treturn mapCleared;\n\t\t\t\t});\n\t\t\t\tconst newPlayer = getRandomPlayer(player);\n\t\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.tetromino)) loseGame();\n\t\t\t\treturn newPlayer;\n\t\t\t}\n\t\t\treturn { ...player, pos: newPos };\n\t\t});\n\t};\n\n\tconst rotatePlayer = () => {\n\t\tconst clonedPlayer = JSON.parse(JSON.stringify(player));\n\t\tlet mtrx = clonedPlayer.tetromino.tetromino.map((_, index) =>\n\t\t\tclonedPlayer.tetromino.tetromino.map(column => column[index])\n\t\t);\n\t\tmtrx = mtrx.map(row => row.reverse());\n\t\tif (validatePosition(player.pos, { tetromino: mtrx }))\n\t\t\tsetPlayer({ ...player, tetromino: { ...player.tetromino, tetromino: mtrx } });\n\t};\n\n\tconst keyUp = ({ keyCode }) => {\n\t\tif (pause || gameOver)\n\t\t\treturn;\n\t\tconst THRESHOLD = 80;\n\t\t// This activates the interval again when the user releases the down arrow.\n\t\tif (keyCode === 40) {\n\t\t\tsetDown(false);\n\t\t\tif (Date.now() - tick <= THRESHOLD) drop();\n\t\t}\n\t\tif (keyCode === 32) setSpaceReleased(true);\n\t};\n\n\tconst forwardDown = () => {\n\t\tif (pause || gameOver)\n\t\t\treturn;\n\t\tsetPlayer(player => {\n\t\t\tconst playerCopy = JSON.parse(JSON.stringify(player));\n\t\t\tplayerCopy.pos = [...hintPlayer.pos];\n\t\t\tsetMap(map => {\n\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(playerCopy, map);\n\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\n\t\t\t\treturn mapCleared;\n\t\t\t});\n\t\t\tconst newPlayer = getRandomPlayer(player);\n\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.tetromino)) loseGame();\n\t\t\treturn newPlayer;\n\t\t});\n\t};\n\n\tconst keyDown = ({ keyCode }) => {\n\t\tif (pause || gameOver)\n\t\t\treturn;\n\t\tswitch (keyCode) {\n\t\t\tcase 37:\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\trotatePlayer();\n\t\t\t\tbreak;\n\t\t\tcase 39:\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\n\t\t\t\tbreak;\n\t\t\tcase 40:\n\t\t\t\tsetTick(Date.now());\n\t\t\t\tsetDown(true);\n\t\t\t\tbreak;\n\t\t\tcase 32:\n\t\t\t\tif (spaceReleased) {\n\t\t\t\t\tsetSpaceReleased(false);\n\t\t\t\t\tforwardDown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tconst checkMap = React.useCallback(\n\t\tmap => {\n\t\t\tlet rowsClear = [];\n\t\t\tmap.forEach((row, y) => {\n\t\t\t\tlet clear = true;\n\t\t\t\trow.forEach((pixel, x) => {\n\t\t\t\t\tif (pixel.fill === 0) clear = false;\n\t\t\t\t});\n\t\t\t\tif (clear) rowsClear.push(y);\n\t\t\t});\n\t\t\tif (rowsClear.length > 0) {\n\t\t\t\tlet newMap = map.slice();\n\t\t\t\trowsClear.forEach(y => {\n\t\t\t\t\tfor (let mapY = newMap.length - 1; mapY >= 0; mapY--)\n\t\t\t\t\t\tif (mapY <= y)\n\t\t\t\t\t\t\tif (mapY > 0) newMap[mapY] = newMap[mapY - 1];\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tnewMap[mapY] = [...new Array(STAGE_WIDTH)].map(() => ({\n\t\t\t\t\t\t\t\t\tfill: 0,\n\t\t\t\t\t\t\t\t\tcolor: []\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t\tsetlines(quant => quant + rowsClear.length);\n\t\t\t\tconst bonusLevel = 100 * (level * level);\n\t\t\t\tconst bonusRows = 40 * (rowsClear.length * rowsClear.length - 1);\n\t\t\t\tsetScore(score => score + 300 * rowsClear.length + bonusRows + bonusLevel);\n\t\t\t\treturn newMap;\n\t\t\t}\n\t\t\treturn map;\n\t\t},\n\t\t[level]\n\t);\n\n\tconst validatePosition = React.useCallback(\n\t\t(pos, tetromino) => {\n\t\t\tfor (let y = 0; y < tetromino.tetromino.length; y++)\n\t\t\t\tfor (let x = 0; x < tetromino.tetromino[y].length; x++)\n\t\t\t\t\tif (tetromino.tetromino[y][x] === 1) {\n\t\t\t\t\t\tlet mapY = pos[0] + y;\n\t\t\t\t\t\tlet mapX = pos[1] + x;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tmapY > STAGE_HEIGHT ||\n\t\t\t\t\t\t\tmapX < 0 ||\n\t\t\t\t\t\t\tmapX > STAGE_WIDTH ||\n\t\t\t\t\t\t\t!map[mapY] ||\n\t\t\t\t\t\t\t!map[mapY][mapX] ||\n\t\t\t\t\t\t\tmap[mapY][mapX].fill === 1\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t[map]\n\t);\n\n\tconst calculateHintPlayer = React.useCallback(\n\t\tplayer => {\n\t\t\tconst hintTetromino = JSON.parse(JSON.stringify(player.tetromino));\n\t\t\tlet hintPosition = [...player.pos];\n\t\t\twhile (validatePosition([hintPosition[0] + 1, hintPosition[1]], hintTetromino))\n\t\t\t\thintPosition = [hintPosition[0] + 1, hintPosition[1]];\n\t\t\treturn { pos: hintPosition, tetromino: hintTetromino };\n\t\t},\n\t\t[validatePosition]\n\t);\n\n\tconst getNewPlayerPos = React.useCallback(\n\t\tmovement => {\n\t\t\tlet newPos;\n\t\t\tif (!player) return;\n\t\t\tif (movement === \"down\") newPos = [player.pos[0] + 1, player.pos[1]];\n\t\t\tif (movement === \"left\") newPos = [player.pos[0], player.pos[1] - 1];\n\t\t\tif (movement === \"right\") newPos = [player.pos[0], player.pos[1] + 1];\n\t\t\tif (!validatePosition(newPos, player.tetromino)) return player.pos;\n\t\t\treturn newPos;\n\t\t},\n\t\t[player, validatePosition]\n\t);\n\n\tuseInterval(\n\t\t() => {\n\t\t\tdrop();\n\t\t},\n\t\t(pause || gameOver) ? null : down ? 50 : 450 - (level - 1) * 20\n\t);\n\n\tuseEffect(() => {\n\t\tif (!player) return;\n\t\tsetHintPlayer(calculateHintPlayer(player));\n\t}, [player, calculateHintPlayer]);\n\n\tconst bind = useDrag(\n\t\t({ down, movement: [mx, my], velocity }) => {\n\t\t\tconst THRESHOLD = 20;\n\t\t\tconst FORCE_THRESHOLD = 1;\n\t\t\tif (down) {\n\t\t\t\tif (Math.abs(mx - dragX) > THRESHOLD) {\n\t\t\t\t\tif (mx - dragX > 0)\n\t\t\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\n\t\t\t\t\telse setPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\n\t\t\t\t\tsetDragX(mx);\n\t\t\t\t}\n\t\t\t\tif (Math.abs(my - dragY) > THRESHOLD) {\n\t\t\t\t\tif (velocity > FORCE_THRESHOLD) {\n\t\t\t\t\t\tif (spaceReleased) {\n\t\t\t\t\t\t\tsetSpaceReleased(false);\n\t\t\t\t\t\t\tforwardDown();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (my - dragY > 0) drop();\n\t\t\t\t\tsetDragY(my);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetDragX(0);\n\t\t\t\tsetDragY(0);\n\t\t\t\tsetSpaceReleased(true);\n\t\t\t}\n\t\t},\n\t\t{ filterTaps: true, lockDirection: true }\n\t);\n\n\tif (!player || !map || !hintPlayer)\n\t\treturn (\n\t\t\t<Center>\n\t\t\t\t<BarLoader color={\"#C41212\"} />\n\t\t\t</Center>\n\t\t);\n\treturn (\n\t\t<Stage\n\t\t\tlose={gameOver}\n\t\t\trestartClick={() => restartGame()}\n\t\t\tmap={map}\n\t\t\tplayer={player}\n\t\t\thint={hintPlayer}\n\t\t\tpaused={pause}\n\t\t\tstatus={{ lines, score, level }}\n\t\t\tonBlur={() => setPause(true)}\n\t\t\tonFocus={() => setPause(false)}\n\t\t\ttabIndex=\"0\"\n\t\t\tonKeyUp={keyUp}\n\t\t\tonKeyDown={keyDown}\n\t\t\tonClick={() => rotatePlayer()}\n\t\t\t{...bind()}\n\t\t/>\n\t);\n};\n\nexport default Game;","import { useEffect, useRef } from \"react\";\n\nexport function useInterval(callback, delay) {\n    const savedCallback = useRef();\n\n    //This remembers the latest callback\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    //This controls the interval in which the tetromino moves with a slight delay\n    useEffect (() => {\n        function tick() {\n            savedCallback.current();\n        }\n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n    }, [delay]);\n}","import React, { useState } from \"react\";\n\nimport StartPage from \"../StartPage\";\nimport Game from \"../Game\";\n\nconst Connection = () => {\n\tconst [runing, setRuning] = useState(false);\n\treturn runing ? (\n\t\t<Game stopClick={() => setRuning(false)} />\n\t) : (\n\t\t<StartPage startClick={() => setRuning(true)} />\n\t);\n};\n\nexport default Connection;","import React from \"react\";\nimport \"./styles.css\";\n\nimport Connection from \"./components/Connection\";\n\nexport default function App() {\n  return <Connection />;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}